# Student model configuration
# Training hyperparameters
training:
  batch_size: 128
  max_epochs: 100
  learning_rate: 1.0e-4
  weight_decay: 1.0e-5
  betas: [0.9, 0.98]
  epsilon: 1.0e-9
  early_stopping_patience: 9
  seq_len: 108
  seq_stride: 36
  save_checkpoint_interval: 10
  min_lr: 5.0e-6
  lr_decay_factor: 0.95
  # Warm-up parameters
  use_warmup: false
  warmup_epochs: 10
  warmup_start_lr: 1.0e-5  # 1/10 of learning_rate by default
  # New LR schedule parameter (optional)
  lr_schedule: null  # Can be 'cosine', 'linear_decay', 'one_cycle', or 'cosine_warm_restarts'
  # Focal loss parameters
  use_focal_loss: false     # Set to true to enable focal loss
  focal_gamma: 2.0          # Controls the down-weighting of well-classified examples
  focal_alpha: null         # Optional class weighting factor (null to use class_weights)

# Model hyperparameters
model:
  n_group: 4          # Adjust based on frequency dimension (see below)
  f_layer: 3          # Frequency attention layers - increased to better match BTC
  f_head: 6           # Frequency attention heads - increased for more capacity
  t_layer: 3          # Temporal attention layers - increased to better match BTC
  t_head: 6           # Temporal attention heads - increased for more capacity
  d_layer: 3          # Decoder layers - increased to better match BTC bidirectional capability
  d_head: 6           # Decoder heads - increased for more capacity
  dropout: 0.3        # Dropout rate - kept the same
  use_chord_aware_loss: false

mp3:
  song_hz: 22050
  inst_len: 10.0      # Updated to match teacher
  skip_interval: 5.0  # Added from teacher

feature:
  n_bins: 144         # Updated to match teacher
  bins_per_octave: 24 # Updated to match teacher
  hop_length: 2048    # Updated to match teacher
  hop_duration: 0.0928  # Computed as 2048 / 22050 â‰ˆ 0.0928 seconds per frame
  large_voca: false   # Matches teacher

# Data paths
paths:
  # Storage root path - can be changed to point to different data storage locations
  storage_root: "/mnt/storage"
  
  # Data paths - can be absolute or relative to storage_root
  # If a path starts with "/", it's treated as absolute, otherwise relative to storage_root
  spec_dir: "data/synth/spectrograms"    # Will be resolved as {storage_root}/data/synth/spectrograms
  label_dir: "data/synth/labels"         # Will be resolved as {storage_root}/data/synth/labels
  
  # Alternative paths (used as fallbacks if primary paths don't have data)
  # Set to empty string or remove to disable
  alt_spec_dir: ""
  alt_label_dir: ""
  
  # Output paths
  checkpoints_dir: "checkpoints"

# Miscellaneous
misc:
  seed: 42
  use_cuda: true
  logging_level: 1
  augmentation_enabled: false